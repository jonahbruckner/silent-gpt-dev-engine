{{ define "main" }}

<style>
.product-container {
  max-width: 900px;
  margin: 0 auto;
  padding: 2rem 1rem;
  text-align: center;
}

.product-hero-title {
  font-size: 2.4rem;
  font-weight: 700;
  margin-bottom: 1rem;
}

.product-description {
  font-size: 1.1rem;
  color: var(--muted);
  max-width: 650px;
  margin: 0.5rem auto 2rem;
}

.buy-button {
  display: inline-block;
  margin-top: 1.2rem;
  padding: 0.9rem 2.2rem;
  background: linear-gradient(135deg, var(--accent), #22c55e);
  color: white;
  border-radius: 999px;
  text-decoration: none;
  font-size: 1.1rem;
  font-weight: 600;
  box-shadow: 0 10px 30px rgba(0,0,0,0.5);
  border: none;
  cursor: pointer;
}

.buy-button:hover {
  filter: brightness(1.08);
}

.buy-error {
  margin-top: 0.75rem;
  font-size: 0.9rem;
  color: #f97373;
}

.section-title {
  margin-top: 3rem;
  font-size: 1.8rem;
  font-weight: 600;
}

.article-list {
  margin-top: 1.5rem;
  list-style: none;
  padding: 0;
}

.article-list li {
  margin: 0.4rem 0;
  font-size: 1.05rem;
}
</style>

<div class="product-container">

  <h1 class="product-hero-title">{{ .Title }}</h1>

  <p class="product-description">
    {{ with .Params.description }}
      {{ . }}
    {{ else }}
      {{ .Summary }}
    {{ end }}
  </p>

  {{/* Preislabel: erst price_label, fallback price_eur */}}
  {{ $priceLabel := "" }}
  {{ if .Params.price_label }}
    {{ $priceLabel = .Params.price_label }}
  {{ else if .Params.price_eur }}
    {{ $priceLabel = printf "%d €" .Params.price_eur }}
  {{ else }}
    {{ $priceLabel = "Jetzt kaufen" }}
  {{ end }}

  {{/* Pack-Slug: bevorzugt slug, fallback pack_slug */}}
  {{ $packSlug := "" }}
  {{ if .Params.slug }}
    {{ $packSlug = .Params.slug }}
  {{ else if .Params.pack_slug }}
    {{ $packSlug = .Params.pack_slug }}
  {{ end }}

  {{/* Stripe Price ID aus Frontmatter (kommt aus sync_packs_from_weekly.py) */}}
  {{ $priceId := .Params.stripe_price_id }}

  {{ if and $packSlug $priceId }}
    <a
      class="buy-button"
      href="{{ .Site.Params.backendBaseURL }}/pay/{{ $packSlug }}?price_id={{ $priceId }}"
    >
      Kaufen – {{ $priceLabel }}
    </a>
  {{ else }}
    <p class="buy-error">
      Für dieses Pack ist noch keine Stripe-Price-ID konfiguriert.
    </p>
  {{ end }}

  <!-- CONTENT SECTION -->
  <h2 class="section-title">Was ist im Pack enthalten?</h2>

  <div class="product-description" style="margin-bottom: 1.5rem;">
    {{ .Content }}
  </div>

</div>

{{ end }}
