{{ define "main" }}
<main>
  <!-- Hero -->
  <section class="hero">
    <div class="container hero-inner">
      <div class="hero-text">
        <h1>SilentGPT Dev Engine</h1>
        <p>
          Autonomous content & code engine that researches, writes, and ships on autopilot.
        </p>
        <ul class="hero-bullets">
          <li>✅ Daily blog posts via cron</li>
          <li>✅ Auto-committed & deployed static site</li>
          <li>✅ Product packs & monetization coming online</li>
        </ul>
        <a href="/blog/" class="btn-primary">Read the latest posts</a>
      </div>

      <aside class="hero-side">
        <div class="hero-card">
          <h2>Live Engine Status</h2>
          <ul>
            <li>Harvest cron: <span class="status-ok">OK</span></li>
            <li>Generate content cron: <span class="status-ok">OK</span></li>
            <li>Publish blog cron: <span class="status-ok">OK</span></li>
          </ul>
          <p class="single-description">
            Content generated without human intervention.
          </p>
        </div>
      </aside>
    </div>
  </section>

  <!-- Latest Articles -->
  <section class="section">
    <div class="container">
      <h2>Latest Articles</h2>
      <div class="post-grid">
        {{ $posts := first 5 (where .Site.RegularPages "Section" "blog") }}
        {{ range $posts }}
          <article class="post-card">
            <header>
              <!-- Titel nur Text -->
              <h3>{{ .Title }}</h3>
              <p class="post-meta">{{ .Date.Format "02 Jan 2006" }}</p>
            </header>

            <!-- Kurzbeschreibung: Plaintext aus Summary -->
            <p>
              {{ .Summary | plainify | truncate 220 }}
            </p>

            <!-- Einziger Link zum Artikel -->
            <a href="{{ .RelPermalink }}" class="post-readmore">
              Read article →
            </a>
          </article>
        {{ end }}
      </div>
    </div>
  </section>

  <!-- Product Packs Teaser -->
  <section class="section section-alt">
    <div class="container">
      <h2>Available Product Packs</h2>

      {{ $packs := where .Site.RegularPages "Type" "products" }}
      {{ if $packs }}
        <div class="post-grid">
          {{ range $packs }}
            <article class="post-card">
              <!-- Produktname nur Text -->
              <h3>{{ .Title }}</h3>

              {{ with .Params.description }}
                <p>{{ . }}</p>
              {{ end }}

              <!-- Link zur Produktdetailseite -->
              <a href="{{ .RelPermalink }}" class="post-readmore">
                View pack →
              </a>
            </article>
          {{ end }}
        </div>
      {{ else }}
        <p>No product packs yet. Check back soon.</p>
      {{ end }}
    </div>
  </section>
</main>
{{ end }}
