{{ define "main" }}
<article class="single-article">
  <div class="container">

    <header class="single-header">
      <h1>{{ .Title }}</h1>

      {{ with .Params.description }}
        <p class="single-description">{{ . }}</p>
      {{ end }}
    </header>

    {{/* ===== Product-CTA: erscheint, sobald pack_slug vorhanden ist ===== */}}
    {{ if .Params.pack_slug }}
      <section class="product-pay-cta">
        {{/* BACKEND_BASE_URL aus Netlify-Env, Fallback auf Render-URL */}}
        {{ $backend := getenv "BACKEND_BASE_URL" | default "https://silent-gpt-backend.onrender.com" }}

        {{ with .Params.price_label }}
          <p class="product-price">{{ . }}</p>
        {{ end }}

        <a class="product-pay-button"
           href="{{ $backend }}/pay/{{ .Params.pack_slug }}">
          Buy this pack
        </a>

        <p class="product-pay-hint">
          Secure checkout via Stripe. Instant download after payment.
        </p>
      </section>
    {{ end }}

    <div class="single-content">
      {{ .Content }}
    </div>

  </div>
</article>
{{ end }}
